# MRS 1.7.1.6补丁说明<a name="mrs_01_9012"></a>

## 补丁基本信息<a name="section918210179183"></a>

**表 1**  补丁基本信息

<a name="table884969161914"></a>
<table><tbody><tr id="row1285014971914"><th class="firstcol" valign="top" width="15%" id="mcps1.2.3.1.1"><p id="p132483032011"><a name="p132483032011"></a><a name="p132483032011"></a>补丁号</p>
</th>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.2.3.1.1 "><p id="p024815013203"><a name="p024815013203"></a><a name="p024815013203"></a>MRS 1.7.1.6</p>
</td>
</tr>
<tr id="row13850119191916"><th class="firstcol" valign="top" width="15%" id="mcps1.2.3.2.1"><p id="p524890182020"><a name="p524890182020"></a><a name="p524890182020"></a>发布时间</p>
</th>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.2.3.2.1 "><p id="p22491020204"><a name="p22491020204"></a><a name="p22491020204"></a>2019-01-24</p>
</td>
</tr>
<tr id="row15661112573315"><th class="firstcol" rowspan="5" valign="top" width="15%" id="mcps1.2.3.3.1"><p id="p112494082012"><a name="p112494082012"></a><a name="p112494082012"></a>解决的问题</p>
</th>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.2.3.3.1 "><p id="p1893411016419"><a name="p1893411016419"></a><a name="p1893411016419"></a><strong id="b14441152817392"><a name="b14441152817392"></a><a name="b14441152817392"></a>MRS 1.7.1.6修复问题列表：</strong></p>
<p id="p49342003419"><a name="p49342003419"></a><a name="p49342003419"></a><strong id="b129346019415"><a name="b129346019415"></a><a name="b129346019415"></a>MRS Manager</strong></p>
<p id="p49341201143"><a name="p49341201143"></a><a name="p49341201143"></a>MRS服务启动、停止及重启支持显示依赖关系，并自定义重启哪些服务。</p>
<p id="p6934908418"><a name="p6934908418"></a><a name="p6934908418"></a>MRS Manager查看HBase集群运行状态时，增加集群维度的监控项。</p>
<p id="p1093470748"><a name="p1093470748"></a><a name="p1093470748"></a><strong id="b19157121161811"><a name="b19157121161811"></a><a name="b19157121161811"></a>MRS 大数据组件</strong></p>
<p id="p5934906416"><a name="p5934906416"></a><a name="p5934906416"></a>MRS hue支持Yarn任务的管理功能，如停止应用。</p>
<p id="p15934190749"><a name="p15934190749"></a><a name="p15934190749"></a>MRS 支持HBase压缩队列告警。</p>
</td>
</tr>
<tr id="row1669315403315"><td class="cellrowborder" valign="top" headers="mcps1.2.3.3.1 "><p id="p182541425543"><a name="p182541425543"></a><a name="p182541425543"></a><strong id="b105041224203918"><a name="b105041224203918"></a><a name="b105041224203918"></a>MRS 1.7.1.5 修复问题列表：</strong></p>
<p id="p4254825848"><a name="p4254825848"></a><a name="p4254825848"></a><strong id="b72548257412"><a name="b72548257412"></a><a name="b72548257412"></a>MRS Manager</strong></p>
<p id="p125410251349"><a name="p125410251349"></a><a name="p125410251349"></a>MRS Manager UI界面排版优化</p>
<p id="p72541251047"><a name="p72541251047"></a><a name="p72541251047"></a>MRS Manager 操作及显示易用性优化</p>
<p id="p18254112517415"><a name="p18254112517415"></a><a name="p18254112517415"></a>MRS Manager 增加大数据服务滚动重启能力</p>
<p id="p142544251447"><a name="p142544251447"></a><a name="p142544251447"></a>MRS Manager 新增文件句柄数量监控</p>
<p id="p1625410257416"><a name="p1625410257416"></a><a name="p1625410257416"></a>MRS Manager 新增大数据组件发生重启事件上报</p>
<p id="p1725422513418"><a name="p1725422513418"></a><a name="p1725422513418"></a><strong id="b9254132518415"><a name="b9254132518415"></a><a name="b9254132518415"></a>MRS 镜像</strong></p>
<p id="p925510251247"><a name="p925510251247"></a><a name="p925510251247"></a>解决ECS VNC登录不停打印输出问题</p>
<p id="p1525522511418"><a name="p1525522511418"></a><a name="p1525522511418"></a>解决操作系统日志转储配置问题</p>
</td>
</tr>
<tr id="row871417448378"><td class="cellrowborder" valign="top" headers="mcps1.2.3.3.1 "><p id="p425520251643"><a name="p425520251643"></a><a name="p425520251643"></a><strong id="b10192157182414"><a name="b10192157182414"></a><a name="b10192157182414"></a>MRS 1.7.1.3 修复问题列表：</strong></p>
<p id="p783228153819"><a name="p783228153819"></a><a name="p783228153819"></a>MRS Manager新增运维通道功能。</p>
</td>
</tr>
<tr id="row326134219379"><td class="cellrowborder" valign="top" headers="mcps1.2.3.3.1 "><p id="p162556255413"><a name="p162556255413"></a><a name="p162556255413"></a><strong id="b118616122518"><a name="b118616122518"></a><a name="b118616122518"></a>MRS 1.7.1.2 修复问题列表：</strong></p>
<p id="p1925572514416"><a name="p1925572514416"></a><a name="p1925572514416"></a><strong id="b1325516251840"><a name="b1325516251840"></a><a name="b1325516251840"></a>MRS Manager</strong></p>
<p id="p1925514255415"><a name="p1925514255415"></a><a name="p1925514255415"></a>MRS Manager点击审计日志详细信息下载报错。</p>
<p id="p633681863810"><a name="p633681863810"></a><a name="p633681863810"></a>MRS Manager界面中主机列表下的磁盘使用率计算优化。</p>
</td>
</tr>
<tr id="row19430103563710"><td class="cellrowborder" valign="top" headers="mcps1.2.3.3.1 "><p id="p1925515251943"><a name="p1925515251943"></a><a name="p1925515251943"></a><strong id="b6538134492520"><a name="b6538134492520"></a><a name="b6538134492520"></a>MRS 1.7.1.1 修复问题列表：</strong></p>
<p id="p19255152510419"><a name="p19255152510419"></a><a name="p19255152510419"></a><strong id="b725502513410"><a name="b725502513410"></a><a name="b725502513410"></a>Kafka组件问题</strong></p>
<p id="p325513251341"><a name="p325513251341"></a><a name="p325513251341"></a>KAFKA-5413 Kafka日志清理失败：segment文件offset跨度过大。</p>
<p id="p5255325349"><a name="p5255325349"></a><a name="p5255325349"></a>KAFKA-6529 客户端异常断开场景，Broker内存泄露。</p>
<p id="p2255102513411"><a name="p2255102513411"></a><a name="p2255102513411"></a>KAFKA-5417 并发场景下，客户端连接状态不一致。</p>
<p id="p1225582515415"><a name="p1225582515415"></a><a name="p1225582515415"></a><strong id="b1825517258413"><a name="b1825517258413"></a><a name="b1825517258413"></a>HBase问题</strong></p>
<p id="p2255182516412"><a name="p2255182516412"></a><a name="p2255182516412"></a>HBase解决每次执行balance命令，重复计算region location的问题</p>
</td>
</tr>
<tr id="row17850997197"><th class="firstcol" valign="top" width="15%" id="mcps1.2.3.8.1"><p id="p32491008208"><a name="p32491008208"></a><a name="p32491008208"></a>补丁兼容关系</p>
</th>
<td class="cellrowborder" valign="top" width="85%" headers="mcps1.2.3.8.1 "><p id="p1432955315501"><a name="p1432955315501"></a><a name="p1432955315501"></a>MRS 1.7.1.6补丁包中包含MRS 1.7.1.1，MRS 1.7.1.2，MRS 1.7.1.3 和MRS 1.7.1.5补丁包的全部内容。</p>
</td>
</tr>
</tbody>
</table>

## 注意事项<a name="section1429338144017"></a>

-   MRS 1.7.1.6补丁安装之后，HBase和Hue的配置状态会变成过期状态，需要手动在MRS Manager页面执行滚动重启HBase服务和Hue服务。具体操作请参考[支持滚动重启](支持滚动重启.md)。

    **图 1**  HBase服务和Hue服务状态<a name="fig95753312814"></a>  
    ![](figures/HBase服务和Hue服务状态.jpg "HBase服务和Hue服务状态")

-   新增弹性公网IP访问MRS Manager功能，弹性公网IP使用及注意事项说明参考[访问MRS Manager（MRS 2.x及之前版本）](访问MRS-Manager（MRS-2-x及之前版本）.md)。
-   普通集群（Kerberos关闭）增加了登录MRS Manager认证功能，默认初始帐号为：admin 密码为MrsDefault@123，首次登录请及时修改登录密码。安全集群登录MRS Manager认证的帐号名密码为用户自己设定值。
-   由于1.7.1 集群的健康检查中存在一项误报，而补丁安装前会进行集群的健康检查。从而导致客户第一次提交安装补丁后，提示集群异常，补丁安装终止。在确认报错是误报后，客户可以再次提交安装补丁请求，第二次安装补丁会跳过健康检查，进行补丁安装。

    误报内容可以通过如下方式确认：

    [查看并导出检查报告](查看并导出检查报告.md)，健康检查结果上只存在这两个主机报错：“安装目录及数据目录检查： 目录下文件异常. 请检查安装目录和数据目录下的内容“。

    **图 2**  健康检查结果表<a name="fig033313431914"></a>  
    ![](figures/健康检查结果表.png "健康检查结果表")


## 安装补丁的影响<a name="section14929154819188"></a>

-   安装MRS 1.7.1.1，MRS 1.7.1.2补丁期间会重启服务，重启服务期间会引起服务暂时不可用。如果已经安装了MRS 1.7.1.2补丁之后，从MRS 1.7.1.2升级其他补丁不会重启服务，业务不断服。
-   MRS 1.7.1.1，MRS 1.7.1.2补丁安装后，需要重新下载安装全量的客户端，包含Master节点的原始客户端和虚拟私有云的其他节点使用的客户端（即您自行搭建的客户端）。
-   主Master节点的原始客户端全量更新，请参见[全量更新主Master节点的原始客户端](更新客户端（3-x之前版本）.md#section92959464575)。
-   备Master节点的原始客户端全量更新，请参见[全量更新备Master节点的原始客户端](更新客户端（3-x之前版本）.md#section1129715468573)。
-   自行搭建的客户端全量安装方法，请参见[安装客户端（3.x之前版本）](安装客户端（3-x之前版本）.md)。

>![](public_sys-resources/icon-note.gif) **说明：** 
>-   重新安装客户端前建议先对老客户端进行备份。
>-   若您根据业务场景修改过客户端配置，请重装客户端后再次修改客户端配置。

