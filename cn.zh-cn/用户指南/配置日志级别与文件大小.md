# 配置日志级别与文件大小<a name="admin_guide_000195"></a>

## 操作场景<a name="zh-cn_topic_0263899278_section21092604"></a>

如果需要在日志中调整记录的日志级别，则管理员可以修改FusionInsight Manager的日志级别。对于某个具体的服务，除了可以修改日志级别，还可以修改日志文件大小，防止磁盘空间不足日志无法保存。

## 对系统的影响<a name="zh-cn_topic_0263899278_section55615708"></a>

保存新的配置需要重启服务，此时对应的服务不可用。

## 修改FusionInsight Manager日志级别<a name="zh-cn_topic_0263899278_section155193013273"></a>

1.  以**omm**用户登录主管理节点。
2.  执行以下命令，切换路径。

    **cd $\{BIGDATA\_HOME\}/om-server/om/sbin**

3.  执行以下命令，修改日志级别。

    **./setLogLevel.sh **_日志级别参数_

    日志级别参数如下，优先级从高到低分别是FATAL、ERROR、WARN、INFO、DEBUG，程序会打印高于或等于所设置级别的日志，设置的日志等级越高，打印出来的日志就越少：

    -   “DEFAULT”：设置后恢复到默认日志级别。
    -   “FATAL”：严重错误日志级别，设置后日志只会打印输出“FATAL”信息。
    -   “ERROR”：错误日志级别，设置后日志打印输出“ERROR”和“FATAL”信息。
    -   “WARN”：警告日志级别，设置后日志打印输出“WARN”、“ERROR”和“FATAL”信息。
    -   “INFO”（默认）：提示信息日志级别，设置后日志打印输出“INFO”、“WARN”、“ERROR”和“FATAL”信息。
    -   “DEBUG”：调试日志级别，设置后日志打印输出“DEBUG”、“INFO”、“WARN”、“ERROR”和“FATAL”信息。
    -   “TRACE”：跟踪日志级别，设置后日志打印输出"TRACE"、“DEBUG”、“INFO”、“WARN”、“ERROR”和“FATAL”信息。

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >由于开源中定义的不同，组件的日志级别定义略有差异。

4.  验证日志级别设置已生效，请下载日志并查看。请参见[日志](日志.md#admin_guide_000073)。

## 修改服务日志级别与日志文件大小<a name="zh-cn_topic_0263899278_section231783810254"></a>

>![](public_sys-resources/icon-note.gif) **说明：** 
>KrbServer，LdapServer以及DBService不支持修改服务日志级别与日志文件大小。

1.  登录FusionInsight Manager。
2.  选择“集群 \>  _待操作集群的名称 _\> 服务”。
3.  单击服务列表中的某个服务，切换到“配置”页签。
4.  选择“全部配置”，左边菜单栏中展开角色实例的菜单，单击所需修改的角色所对应的“日志”。
5.  搜索各项参数，获取参数说明，在参数配置页面勾选所需的日志级别或修改日志文件大小。日志文件大小需填写单位“MB”。

    >![](public_sys-resources/icon-notice.gif) **须知：** 
    >-   系统会根据配置的日志大小自动清理日志，如果需要保存更多的信息请设置一个较大的数值。为确保日志文件的完整性，建议根据实际业务量大小，在日志文件基于规则清理前，手动将日志文件备份存储至其他文件夹中。
    >-   个别服务不支持通过界面修改日志级别。

6.  单击“保存”，在“保存配置”单击“确定”。
7.  验证日志级别设置已生效，请下载日志并查看。

