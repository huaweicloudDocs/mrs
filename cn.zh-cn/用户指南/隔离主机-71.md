# 隔离主机<a name="admin_guide_000059"></a>

## 操作场景<a name="zh-cn_topic_0263899465_s5cede81872d14da59f960f6aaa7823c2"></a>

某个主机出现异常或故障，无法提供服务或影响集群整体性能时，可以临时将主机从集群可用节点排除，使客户端访问其他可用的正常节点。

>![](public_sys-resources/icon-note.gif) **说明：** 
>隔离主机仅支持隔离非管理节点。

## 对系统的影响<a name="zh-cn_topic_0263899465_saea25ffeca544dfcb53ed680cf0563be"></a>

-   主机隔离后该主机上的所有角色实例将被停止，且不能对主机及主机上的所有实例进行启动、停止和配置等操作。
-   主机隔离后部分服务的实例不再工作，服务的配置状态可能过期。
-   主机隔离后无法统计并显示该主机硬件和主机上实例的监控状态及指标数据。
-   待操作节点的SSH端口需保持默认（22），否则将导致本章节任务操作失败。

## 操作步骤<a name="zh-cn_topic_0263899465_section17216194419511"></a>

1.  登录FusionInsight Manager。
2.  单击“主机“。
3.  勾选待隔离主机前的复选框。
4.  在“更多“选择“隔离”。

    在弹出窗口中，输入当前登录的用户密码确认管理员身份，单击“确定”。

5.  在确认隔离的对话框中勾选“我确定隔离所选主机，接受可能出现的服务故障等后果。”单击“确定”。

    界面提示“操作成功。”，单击“完成”，主机成功隔离，“运行状态”显示为“已隔离”。

6.  以**root**用户登录到被隔离主机上，执行**pkill -9 -u omm**命令终止节点上的omm用户的进程，然后执行**ps -ef | grep 'container' | grep '$\{BIGDATA\_HOME\}' | awk '\{print $2\}' | xargs -I '\{\}' kill -9 '\{\}' **命令查找并终止container的进程。
7.  管理员已排除主机的异常或故障后，需要将主机隔离状态取消才能继续使用该主机。

    在“主机“界面勾选已隔离的主机，选择“更多 \> 取消隔离“。

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >取消隔离后，主机上所有角色实例默认不启动。若需要启动主机上角色实例，可以在“主机”页面勾选目标主机，然后选择“更多 \> 启动所有实例”。


