# 修改组件运行用户密码<a name="admin_guide_000257"></a>

## 操作场景<a name="section8270252114334"></a>

建议管理员定期修改集群内组件运行用户的密码，以提升系统运维安全性。

组件运行用户，根据初始密码是否是系统随机生成，可分为两类：

-   密码随机生成的，用户类型为“机机”用户。
-   密码不是随机生成的，用户类型为“人机”用户。

## 对系统的影响<a name="section56325212114334"></a>

初始密码为系统随机生成的组件运行用户，在修改密码后需要重启集群，重启期间会造成业务暂时中断。

## 前提条件<a name="section57563713114334"></a>

已在集群内的任一节点安装了客户端，并获取此节点IP地址。

## 操作步骤<a name="section16111554520"></a>

1.  以客户端安装用户，登录安装了客户端的节点。
2.  执行以下命令，切换到客户端目录，例如“/opt/Bigdata/client”。

    **cd /opt/Bigdata/client**

3.  执行以下命令，配置环境变量。

    **source bigdata\_env**

4.  执行以下命令，输入kadmin/admin用户密码后进入kadmin控制台。

    **kadmin -p kadmin/admin**

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >kadmin/admin的默认密码为“Admin@123”，首次登录后会提示该密码过期，请按照提示修改密码并妥善保存。

5.  执行以下命令，修改系统内部组件运行用户密码。此操作对所有服务器生效。

    **cpw** _系统内部用户名_

    例如：**cpw oms/manager**

    默认密码复杂度要求：

    -   密码字符长度最小为8位。
    -   至少需要包含大写字母、小写字母、数字、空格、特殊字符5种类型字符中的4种。支持的特殊字符为\~\`!?,.;-\_'\(\)\{\}\[\]/<\>@\#$%^&\*+|\\=。
    -   不可和用户名相同或用户名的倒序字符相同。
    -   不可以为常见的易破解密码，例如Admin@12345。
    -   不可与最近N次使用过的密码相同，N为[配置密码策略](配置密码策略.md)中“重复使用规则”的值。此策略只影响“人机”用户。

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >执行如下命令，可以查看用户的信息。
    >**getprinc** _系统内部用户名_
    >例如：**getprinc oms/manager**

6.  确认修改密码的用户，用户类型是哪种？
    -   用户类型为“机机”用户，执行[7](#li22669737114334)。
    -   用户类型为“人机”用户，密码修改完成，任务结束。

7.  <a name="li22669737114334"></a>登录FusionInsight Manager。
8.  选择“集群 \>  _待操作的集群名称_  \> 更多 \> 重启”。
9.  在弹出窗口中，输入当前登录的用户密码确认身份，单击“确定”。
10. 在确认重启的对话框中，单击“确定”。
11. 等待界面提示重启成功。

